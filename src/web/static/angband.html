<!doctype html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Angband</title>
  <link rel="stylesheet" href="assets/style.css">
</head>

<body>
  <div id="angband-progress-overlay">
    <div id='main-angband-spinner' class="spinner"></div>
    <div id='main-angband-status'>Downloading...</div>
    <div>
      <progress value="0" max="100" id="main-angband-progress" class="progress" hidden=1></progress>
    </div>
  </div>

  <span id='controls' style="display: none">
    <span><input type="checkbox" id="pointerLock" checked>Lock/hide mouse pointer &nbsp;&nbsp;&nbsp;</span>
    <span><input type="button" value="Fullscreen"
        onclick="Module.requestFullscreen(document.getElementById('pointerLock').checked, 
                                                                            document.getElementById('resize').checked)">
    </span>
  </span>

  <table id="main-angband-grid" class="angband-grid" tabindex="0"></table>
  <textarea id="output" rows="8"></textarea>

  <script type='text/javascript'>
    var statusElement = document.getElementById('status');
    var progressElement = document.getElementById('progress');
    var spinnerElement = document.getElementById('spinner');

    var Module = {
      preRun: [],
      postRun: [],
      print: (function () {
        var element = document.getElementById('output');
        if (element) element.value = ''; // clear browser cache
        return function (text) {
          if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
          // These replacements are necessary if you render to raw HTML
          //text = text.replace(/&/g, "&amp;");
          //text = text.replace(/</g, "&lt;");
          //text = text.replace(/>/g, "&gt;");
          //text = text.replace('\n', '<br>', 'g');
          console.log(text);
          if (element) {
            element.value += text + "\n";
            element.scrollTop = element.scrollHeight; // focus on bottom
          }
        };
      })(),
      printErr: function (text) {
        if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
        console.error(text);
      },
    };
  </script>
  <script type="text/javascript" src="assets/render.js"></script>
</body>

</html>
